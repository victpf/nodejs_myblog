1. views/components/post-content.ejs 中
post.content使用用了 <%- post.content %>，而不是 <%= post.content %>，因为 post.content 是 markdown 转换成的 html 字符串。
真相在models/posts.js中：

var marked = require('marked');
var Post = require('../lib/mongo').Post;

// 将 post 的 content 从 markdown 转换成 html
Post.plugin('contentToHtml', {
  afterFind: function (posts) {
    return posts.map(function (post) {
      post.content = marked(post.content);
      return post;
    });
  },
  afterFindOne: function (post) {
    if (post) {
      post.content = marked(post.content);
    }
    return post;
  }
});

marked是markdown的实例，这里边可以看到，Post注册了plugin，名叫contentToHtml,这个plugin在后面的方法中都有调用
models/posts.js
module.exports = {
  // 创建一篇文章
  create: function create(post) {
    return Post.create(post).exec();
  },

  // 通过文章 id 获取一篇文章
  getPostById: function getPostById(postId) {
    return Post
      .findOne({ _id: postId })
      .populate({ path: 'author', model: 'User' })
      .addCreatedAt()
      .contentToHtml()
      .exec();
  },
  